(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3505],{89006:function(e,a,t){Promise.resolve().then(t.bind(t,8996))},8996:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return q}});var s=t(57437),r=t(13537),l=t(89506),i=t(36422),n=t(3872),c=t(26850),d=t(5895),o=t(72396),x=t(2265);let m=(0,x.forwardRef)(function(e,a){let{icon:t,children:r,inputProps:l,rootRef:i,...n}=e;return(0,s.jsxs)(o.wx,{ref:i,...n,children:[(0,s.jsx)(o.HC,{ref:a,...l}),(0,s.jsx)(o.Z8,{children:t||(0,s.jsx)(o.FZ,{})}),null!=r&&(0,s.jsx)(o.ke,{children:r})]})});function u(e){let{setSelectedInput:a}=e,[t,r]=(0,x.useState)(!1),[l,i]=(0,x.useState)("");return(0,x.useEffect)(()=>{a("1"),i(navigator.language)},[]),(0,s.jsx)("div",{children:(0,s.jsx)("div",{className:"flex md:flex-row gap-3 border  border-white max-w-[380px] justify-center rounded-md mt-10 p-1",children:(0,s.jsx)("button",{type:"button",value:"1",onClick:()=>{r(!0),a("1")},className:"payment-1 ".concat(t?"bg-transparent text-white":"bg-white  text-black"," w-full   text-md duration-150  font-medium text-center px-3 md:py-0 py-2 md:h-14 rounded-lg"),children:(0,s.jsx)(()=>{let e="pt-BR"===l?new Intl.NumberFormat(l,{style:"currency",currency:"BRL"}).format(10.99):"en-US"===l?new Intl.NumberFormat(l,{style:"currency",currency:"USD"}).format(14.99):"es-ES"===l||"fr-FR"===l||"de-DE"===l?new Intl.NumberFormat(l,{style:"currency",currency:"EUR"}).format(14.99):"";return(0,s.jsxs)("div",{children:["Fa\xe7a seu Pedido - ",e]})},{})})})})}var h=t(31138),p=t(95582),j=t(14129),f=t(20920),g=t(41942),b=t(19728),v=t(66648),N=t(87138),w=t(39343),y=t(54763),C=t(28663),k=t(85003),S=t(16463),E=t(61455),F=t(99854),I=t(80091),P=t(86090);function q(){var e,a;let t=(0,F.cF)(l.Z),[o,q]=(0,x.useState)("1"),[Z,_]=(0,x.useState)([]),[D,z]=(0,x.useState)(!1),[$,R]=(0,x.useState)(!1),[L,A]=(0,x.useState)(""),[T,B]=(0,x.useState)(""),[H,J]=(0,x.useState)(!1),[M,U]=(0,x.useState)(""),[V,O]=(0,x.useState)(""),[G,K]=(0,x.useState)(!1),[Q,W]=(0,x.useState)(""),[Y,X]=(0,x.useState)(!1),[ee,ea]=(0,x.useState)(""),[et,es]=(0,x.useState)(""),[er,el]=(0,x.useState)(""),[ei,en]=(0,x.useState)("");(0,S.useRouter)();let{register:ec,handleSubmit:ed,formState:{errors:eo}}=(0,w.cI)({defaultValues:{cpfcnpj:"",name_client:"",email:""}});async function ex(e){if(K(!0),!await (0,y.c)(e.cpfcnpj)&&"1"===M)return alert("CPF inv\xe1lido!"),{erro:"CPF inv\xe1lido!"};let{imgUpload:a}=await eu();if(!a)return alert("Erro na hora de enviar fotos");let{success:t}=await (0,C.wZ)(ei,L,$,D,T,o,a[0]);if(!t||"1"!==M)return em();{let{pixCustomersDataId:e}=await (0,I.Z)(ei,ee,er,et,2,"2",10.99),{encodedImage:a,qrCode:t}=await (0,P.m)(e);location.href="/payment?encodedImage=".concat(a,"&qrCode=").concat(encodeURIComponent(t))}}(0,x.useEffect)(()=>{let e=(0,f.Z)();try{localStorage.setItem("idUserResMyLoverTik",e),en(e)}catch(e){console.error("Erro ao armazenar o ID do usu\xe1rio:",e)}},[]);let em=async()=>{try{let e=await fetch("/api/create-payment-intent",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({typeRequest:2,idUser:ei,productId:"price_1QXCG5Ht6s00L0BLxhlcHgyL"})}),a=await (0,r.J)("pk_live_51P873pHt6s00L0BL4ciW0iqMPkwTNIsqWf53kP3pnJvSoJEroayyZoCnVBJ9mWcLpQrYTpzG9NFxqXpNeS9DKEpT00peHiV8xp");if(!a)throw Error("Stripe failed to initialize.");let{sessionId:t}=await e.json();await a.redirectToCheckout({sessionId:t})}catch(e){console.error("Erro ao redirecionar para o checkout:",e)}};async function eu(){let e=null==Z?void 0:Z.map(e=>{let a=(0,F.iH)(t,"requestSend/".concat(ei,"/images/").concat(null==e?void 0:e.name));return(0,F.KV)(a,e).then(e=>(0,F.Jt)(e.ref)).catch(a=>{console.error("Erro ao enviar foto ".concat(e,":"),a)})});try{return{imgUpload:await Promise.all(e)}}catch(e){return console.error("Erro ao enviar as fotos:",e),{errorImg:"Algo deu errado!"}}}let eh=async e=>{e.target.files&&_(Array.from(e.target.files))};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(k.cZ,{className:"bg-white",children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(k.fK,{children:(0,s.jsx)(k.$N,{className:"text-black",children:"Escolha a forma de pagamento"})}),(0,s.jsx)(k.a7,{children:(0,s.jsxs)(d.E,{variant:"subtle",defaultValue:"1",value:M,onValueChange:e=>U(e.value),children:[(0,s.jsxs)("div",{className:"flex flex-row gap-3 items-center",children:[(0,s.jsx)(v.default,{quality:100,alt:"pixlogo",width:30,height:30,src:p.Z}),(0,s.jsx)(d.Y,{className:"text-black",value:"1",children:"Pagar com Pix"})]}),"1"===M&&(0,s.jsxs)("div",{className:"flex flex-col gap-7",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("label",{children:[(0,s.jsx)("p",{className:"text-black",children:"Digite seu nome"}),(0,s.jsx)(i.I,{className:"border px-2 text-black",...ec("name_client",{required:"Nome \xe9 obrigat\xf3rio",pattern:{value:/^[A-Za-zÀ-ÖØ-öø-ÿ\s]+$/,message:"Nome inv\xe1lido"}}),onChange:e=>ea(e.target.value),value:ee,placeholder:"Nome"})]}),eo.name_client&&(0,s.jsx)("p",{className:"text-red-500 text-xs absolute",children:eo.name_client.message})]}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("label",{children:[(0,s.jsx)("p",{className:"text-black",children:"Digite seu CPF"}),(0,s.jsx)(i.I,{className:"border px-2 text-black",...ec("cpfcnpj",{required:"CPF \xe9 obrigat\xf3rio",pattern:{value:/^(?!000\.000\.000-00)(\d{3}\.\d{3}\.\d{3}-\d{2})$/,message:"CPF inv\xe1lido. Ex: 123.456.789-00"}}),onChange:e=>{let a=e.target.value.replace(/\D/g,"");a.length>11&&(a=a.substring(0,11)),el(a=(a=(a=a.replace(/(\d{3})(\d)/,"$1.$2")).replace(/(\d{3})(\d)/,"$1.$2")).replace(/(\d{3})(\d{1,2})$/,"$1-$2"))},value:er,placeholder:"CPF"})]}),eo.cpfcnpj&&(0,s.jsx)("p",{className:"text-red-500 text-xs absolute",children:null===(e=eo.cpfcnpj)||void 0===e?void 0:e.message})]}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("label",{children:[(0,s.jsx)("p",{className:"text-black",children:"Digite seu e-mail para receber o seu link"}),(0,s.jsx)(i.I,{className:"border px-2 text-black",...ec("email",{required:"Email \xe9 obrigat\xf3rio para receber seu link",pattern:{value:/^[a-zA-Z0-9._%+-]+@(gmail|hotmail|outlook|yahoo)\.com$/,message:"Email inv\xe1lido."}}),placeholder:"E-mail",onChange:e=>es(e.target.value),value:et})]}),eo.email&&(0,s.jsx)("p",{className:"text-red-500 text-xs absolute",children:null===(a=eo.email)||void 0===a?void 0:a.message})]})]}),(0,s.jsxs)("div",{className:"flex gap-3 flex-row items-center pt-3",children:[(0,s.jsx)(v.default,{quality:100,alt:"cardlogo",width:30,height:30,src:j.Z}),(0,s.jsx)(d.Y,{className:"text-black",value:"2",children:"Pagar com cart\xe3o"})]})]})}),(0,s.jsxs)(k.cN,{children:[(0,s.jsx)(k.My,{asChild:!0,children:(0,s.jsx)(n.z,{disabled:G,variant:"outline",className:"text-black",children:"Cancelar"})}),(0,s.jsx)(n.z,{disabled:G,px:2,bg:"blue.400",mr:3,onClick:ed(e=>{K(!0),ex(e)}),children:(0,s.jsxs)("p",{className:"flex gap-2 items-center justify-center font-bold rounded-lg text-xl text-white",children:[G?"Aguarde":"Fazer Pagamento",G&&(0,s.jsx)("div",{className:"pt-1 lds-circle",children:(0,s.jsx)("div",{})})]})})]}),(0,s.jsx)(k.Rd,{})]})}),(0,s.jsxs)("div",{className:"bg-defaultBg",children:[(0,s.jsx)(N.default,{href:"/",children:(0,s.jsx)(v.default,{alt:"logo",width:150,className:"m-auto pb-10 py-2",src:h.Z})}),(0,s.jsxs)("div",{className:"max-w-[1100px] m-auto px-3 pb-20",children:[(0,s.jsxs)("h1",{className:"text-white text-5xl font-bold pt-5",children:[(0,s.jsx)("span",{className:"relative ",children:"Q"}),"uase l\xe1!"]}),(0,s.jsxs)("p",{className:"text-white  max-w-[590px]",children:["Preencha os dados do pedido e receba o link para compartilhar diretamente com a pessoa desejada, ",(0,s.jsx)("span",{className:" shadow-redDefault border-b",children:"enviado ao seu e-mail."})]}),(0,s.jsx)(u,{setSelectedInput:e=>q(e)}),(0,s.jsxs)("div",{className:"max-w-[700px]",children:[(0,s.jsxs)("label",{className:"w-full text-white",children:[(0,s.jsx)("p",{className:"text-white text-xs  max-w-[400px] font-medium md:leading-7 leading-2 pt-2",children:"Coloque seu pedido aqui:"}),(0,s.jsx)("div",{className:"relative",children:(0,s.jsx)(i.I,{value:L,onChange:e=>A(e.target.value),type:"text",id:"name_couple",placeholder:"1"===o?"Ex:.... quer namorar comigo?":"Ex:.... vamos sair hoje?",className:"text-white  border border-white px-3 placeholder:text-slate-400 text-sm"})})]}),(0,s.jsxs)("div",{className:"bg-[#ffffff28] rounded-sm px-2 my-2",children:[(0,s.jsxs)(m,{defaultChecked:!0,variant:"subtle",checked:D,onCheckedChange:e=>z(!!e.checked),className:"py-5",children:[" ",(0,s.jsx)("p",{className:"text-white",children:'A op\xe7\xe3o "N\xe3o" vai se mover quando tentar clicar'})]}),(0,s.jsxs)(m,{variant:"subtle",checked:$,onCheckedChange:e=>R(!!e.checked),className:"",children:[" ",(0,s.jsx)("p",{className:"text-white",children:'A op\xe7\xe3o "Sim" vai se mover quando tentar clicar (ideal para fugir do pedido de casamento\uD83E\uDD23)'})]})]}),(0,s.jsxs)("label",{className:"w-full text-white",children:[(0,s.jsx)("p",{className:"text-white text-xs  max-w-[400px] font-medium md:leading-7 leading-2 pt-2",children:'Mensagem quando ela dizer "sim"'}),(0,s.jsx)(c.g,{className:"border max-h-56 min-h-56 border-white px-3",value:T,onChange:e=>B(e.target.value),placeholder:""})]}),(0,s.jsxs)(E.OI,{accept:".png, .jpg, .jpeg, .gif",onChange:eh,children:[(0,s.jsx)(E.ZD,{asChild:!0,children:(0,s.jsxs)(n.z,{id:"buttonModal",className:"border md:text-base text-wrap text-xs border-white rounded-sm my-4 px-3 w-full text-white text-center",variant:"outline",size:"sm",children:[(0,s.jsx)(g.Dmm,{}),' Selecione uma imagem caso o pedido seja "SIM"']})}),(0,s.jsx)(E.lG,{})]}),L&&T&&Z.length>0?(0,s.jsx)(k.hg,{asChild:!0,children:(0,s.jsx)("button",{className:"border text-white px-2 max-w-[300px] w-full hover:text-black hover:bg-white bg-transparent duration-200 cursor-pointer flex flex-col justify-center items-center rounded-md mt-3 py-2",children:"Criar pedido"})}):(0,s.jsxs)("button",{disabled:!0,className:"border text-white   bg-transparent duration-200 px-2 max-w-[300px] w-full flex flex-col justify-center items-center rounded-md mt-3 py-2",children:["Criar pedido",L&&T&&Z.length>0?(0,s.jsx)(s.Fragment,{}):(0,s.jsx)("p",{className:"text-slate-400 text-xs",children:"Campos a serem preenchidos"})]})]})]})]}),(0,s.jsx)(b.Z,{})]})}}},function(e){e.O(0,[7699,9212,3872,1670,5623,3306,7505,6853,4767,2350,8828,2971,7023,1744],function(){return e(e.s=89006)}),_N_E=e.O()}]);