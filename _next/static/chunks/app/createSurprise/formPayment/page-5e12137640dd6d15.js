(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[632],{71141:function(e,a,t){Promise.resolve().then(t.bind(t,96326))},16463:function(e,a,t){"use strict";var r=t(71169);t.o(r,"useRouter")&&t.d(a,{useRouter:function(){return r.useRouter}}),t.o(r,"useSearchParams")&&t.d(a,{useSearchParams:function(){return r.useSearchParams}})},20920:function(e,a,t){"use strict";t.d(a,{Z:function(){return c}});for(var r,s={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)},l=new Uint8Array(16),i=[],n=0;n<256;++n)i.push((n+256).toString(16).slice(1));var c=function(e,a,t){if(s.randomUUID&&!a&&!e)return s.randomUUID();var n=(e=e||{}).random||(e.rng||function(){if(!r&&!(r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(l)})();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,a){t=t||0;for(var c=0;c<16;++c)a[t+c]=n[c];return a}return function(e,a=0){return(i[e[a+0]]+i[e[a+1]]+i[e[a+2]]+i[e[a+3]]+"-"+i[e[a+4]]+i[e[a+5]]+"-"+i[e[a+6]]+i[e[a+7]]+"-"+i[e[a+8]]+i[e[a+9]]+"-"+i[e[a+10]]+i[e[a+11]]+i[e[a+12]]+i[e[a+13]]+i[e[a+14]]+i[e[a+15]]).toLowerCase()}(n)}},96326:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return U}});var r=t(57437),s=t(2265),l=t(39343),i=t(20920),n=t(36422),c=t(3872),o=t(26850),d=t(5895),u=t(61455),m=t(66648),x=t(87138),h=t(41942),p=t(31138),f=t(95582),j=t(14129),g=t(19728),b=t(54763),v=t(13537),w=t(85003);function N(e){let{setSelectedInput:a}=e,[t,l]=(0,s.useState)(!1),[i,n]=(0,s.useState)("");return(0,s.useEffect)(()=>{a("1"),n(navigator.language)},[]),(0,r.jsx)("div",{children:(0,r.jsx)("div",{className:"flex md:flex-row gap-3 border  border-white max-w-[380px] justify-center rounded-md mt-10 p-1",children:(0,r.jsx)("button",{type:"button",value:"1",onClick:()=>{l(!0),a("1")},className:"payment-1 bg-white  text-black w-full  text-md duration-150  font-medium text-center px-3 md:py-0 py-2 md:h-14 rounded-lg",children:(0,r.jsx)(()=>{let e="pt-BR"===i?new Intl.NumberFormat(i,{style:"currency",currency:"BRL"}).format(19.99):"en-US"===i?new Intl.NumberFormat(i,{style:"currency",currency:"USD"}).format(19.99):"es-ES"===i||"fr-FR"===i||"de-DE"===i?new Intl.NumberFormat(i,{style:"currency",currency:"EUR"}).format(19.99):"";return(0,r.jsxs)("div",{children:["Crie sua surpresa - ",e]})},{})})})})}var y=t(99854),C=t(89506);async function S(e,a){let t=(0,y.cF)(C.Z),r=null==e?void 0:e.map(e=>{let r=(0,y.iH)(t,"CreateCard/".concat(a,"/images/").concat(null==e?void 0:e.name));return(0,y.KV)(r,e).then(e=>(0,y.Jt)(e.ref)).catch(a=>{console.error("Erro ao enviar foto ".concat(e,":"),a)})});try{return{imgUpload:await Promise.all(r)}}catch(e){if(e instanceof Error)return console.error("Erro ao enviar as fotos:",e),{errorImg:e.message};return{errorImg:"Erro ao enviar as fotos"}}}var k=t(80091),E=t(86090),I=t(42649),P=t(16463);function D(){var e,a;let t=(0,P.useSearchParams)(),[y,C]=(0,s.useState)("1"),[D,U]=(0,s.useState)([]),[R,_]=(0,s.useState)(""),[F,q]=(0,s.useState)("1"),[Z,z]=(0,s.useState)(!1),[V,$]=(0,s.useState)(""),[J,L]=(0,s.useState)(""),[M,T]=(0,s.useState)(""),[A,B]=(0,s.useState)(""),[O,H]=(0,s.useState)(""),[K,Q]=(0,s.useState)("");(0,P.useRouter)();let{register:Y,handleSubmit:W,formState:{errors:X}}=(0,l.cI)({defaultValues:{cpfcnpj:"",name_client:"",email:""}});async function G(e){z(!0);let a=t.get("ref");if(console.log(a),!await (0,b.c)(e.cpfcnpj)&&"1"===F)return alert("CPF inv\xe1lido!"),{erro:"CPF inv\xe1lido!"};let{imgUpload:r}=await S(D,K);if(!r)return alert("Erro na hora de enviar fotos");let{success:s}=await (0,I.Xr)(K,R,r,V,J,a);if(!s||"1"!==F)return ee();{let{pixCustomersDataId:e}=await (0,k.Z)(K,M,O,A,5,"5",19.99),{encodedImage:a,qrCode:t}=await (0,E.m)(e);location.href="/createSurprise/payment?encodedImage=".concat(a,"&qrCode=").concat(encodeURIComponent(t))}}(0,s.useEffect)(()=>{let e=(0,i.Z)();try{localStorage.setItem("idUserResMyLoverTik",e),Q(e)}catch(e){}},[]);let ee=async()=>{try{let e=await fetch("/api/create-payment-intent",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({typeRequest:5,idUser:K,productId:"price_1RTrvwHt6s00L0BL3ubKur65"})}),a=await (0,v.J)("pk_live_51P873pHt6s00L0BL4ciW0iqMPkwTNIsqWf53kP3pnJvSoJEroayyZoCnVBJ9mWcLpQrYTpzG9NFxqXpNeS9DKEpT00peHiV8xp");if(!a)throw Error("Stripe failed to initialize.");let{sessionId:t}=await e.json();await a.redirectToCheckout({sessionId:t})}catch(e){console.error("Erro ao redirecionar para o checkout:",e),z(!1)}};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(w.cZ,{className:"bg-white",children:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(w.fK,{children:(0,r.jsx)(w.$N,{className:"text-black",children:"Escolha a forma de pagamento"})}),(0,r.jsx)(w.a7,{children:(0,r.jsxs)(d.E,{variant:"subtle",defaultValue:"1",value:F,onValueChange:e=>q(e.value),children:[(0,r.jsxs)("div",{className:"flex flex-row gap-3 items-center",children:[(0,r.jsx)(m.default,{quality:100,alt:"pixlogo",width:30,height:30,src:f.Z}),(0,r.jsx)(d.Y,{className:"text-black",value:"1",children:"Pagar com Pix"})]}),"1"===F&&(0,r.jsxs)("div",{className:"flex flex-col gap-7",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)("label",{children:[(0,r.jsx)("p",{className:"text-black",children:"Digite seu nome"}),(0,r.jsx)(n.I,{className:"border px-2 text-black",...Y("name_client",{required:"Nome \xe9 obrigat\xf3rio",pattern:{value:/^[A-Za-zÀ-ÖØ-öø-ÿ\s]+$/,message:"Nome inv\xe1lido"}}),onChange:e=>T(e.target.value),value:M,placeholder:"Nome"})]}),X.name_client&&(0,r.jsx)("p",{className:"text-red-500 text-xs absolute",children:X.name_client.message})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)("label",{children:[(0,r.jsx)("p",{className:"text-black",children:"Digite seu CPF"}),(0,r.jsx)(n.I,{className:"border px-2 text-black",...Y("cpfcnpj",{required:"CPF \xe9 obrigat\xf3rio",pattern:{value:/^(?!000\.000\.000-00)(\d{3}\.\d{3}\.\d{3}-\d{2})$/,message:"CPF inv\xe1lido. Ex: 123.456.789-00"}}),onChange:e=>{let a=e.target.value.replace(/\D/g,"");a.length>11&&(a=a.substring(0,11)),H(a=(a=(a=a.replace(/(\d{3})(\d)/,"$1.$2")).replace(/(\d{3})(\d)/,"$1.$2")).replace(/(\d{3})(\d{1,2})$/,"$1-$2"))},value:O,placeholder:"CPF"})]}),X.cpfcnpj&&(0,r.jsx)("p",{className:"text-red-500 text-xs absolute",children:null===(e=X.cpfcnpj)||void 0===e?void 0:e.message})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)("label",{children:[(0,r.jsx)("p",{className:"text-black",children:"Digite seu e-mail para receber o seu link"}),(0,r.jsx)(n.I,{className:"border px-2 text-black",...Y("email",{required:"Email \xe9 obrigat\xf3rio para receber seu link",pattern:{value:/^[a-zA-Z0-9._%+-]+@(gmail|hotmail|outlook|yahoo)\.com$/,message:"Email inv\xe1lido."}}),placeholder:"E-mail",onChange:e=>B(e.target.value),value:A})]}),X.email&&(0,r.jsx)("p",{className:"text-red-500 text-xs absolute",children:null===(a=X.email)||void 0===a?void 0:a.message})]})]}),(0,r.jsxs)("div",{className:"flex gap-3 flex-row items-center pt-3",children:[(0,r.jsx)(m.default,{quality:100,alt:"cardlogo",width:30,height:30,src:j.Z}),(0,r.jsx)(d.Y,{className:"text-black",value:"2",children:"Pagar com cart\xe3o"})]})]})}),(0,r.jsxs)(w.cN,{children:[(0,r.jsx)(w.My,{asChild:!0,children:(0,r.jsx)(c.z,{disabled:Z,variant:"outline",className:"text-black",children:"Cancelar"})}),(0,r.jsx)(c.z,{disabled:Z,px:2,bg:"blue.400",mr:3,onClick:W(e=>{z(!0),G(e)}),children:(0,r.jsxs)("p",{className:"flex gap-2 items-center justify-center font-bold rounded-lg text-xl text-white",children:[Z?"Aguarde":"Fazer Pagamento",Z&&(0,r.jsx)("div",{className:"pt-1 lds-circle",children:(0,r.jsx)("div",{})})]})})]}),(0,r.jsx)(w.Rd,{})]})}),(0,r.jsxs)("div",{className:"bg-defaultBg",children:[(0,r.jsx)(x.default,{href:"/",children:(0,r.jsx)(m.default,{alt:"logo",width:150,className:"m-auto pb-10 py-2",src:p.Z})}),(0,r.jsxs)("div",{className:"max-w-[1100px] m-auto px-3 pb-20",children:[(0,r.jsxs)("h1",{className:"text-white text-5xl font-bold pt-5",children:[(0,r.jsx)("span",{className:"relative ",children:"Q"}),"uase l\xe1!"]}),(0,r.jsxs)("p",{className:"text-white max-w-[590px]",children:["Preencha os dados, fa\xe7a o pagamento e receba o link para compartilhar diretamente com a pessoa desejada,"," ",(0,r.jsx)("span",{className:"shadow-redDefault border-b",children:"enviado ao seu e-mail."})]}),(0,r.jsx)(N,{setSelectedInput:e=>C(e)}),(0,r.jsxs)("div",{className:"max-w-[700px]",children:[(0,r.jsxs)("label",{className:"w-full text-white",children:[(0,r.jsx)("p",{className:"text-white text-xs max-w-[400px] font-medium md:leading-7 leading-2 pt-2",children:"Nome do casal aqui:"}),(0,r.jsx)("div",{className:"relative",children:(0,r.jsx)(n.I,{value:V,onChange:e=>$(e.target.value),type:"text",id:"name_couple",placeholder:"Jo\xe3o e Maria",className:"text-white border border-white px-3 placeholder:text-slate-400 text-sm"})})]}),(0,r.jsxs)("label",{className:"w-full text-white",children:[(0,r.jsx)("p",{className:"text-white text-xs max-w-[400px] font-medium md:leading-7 leading-2 pt-2",children:"Escolha uma musica do spotify para a surpresa (opcional):"}),(0,r.jsx)("div",{className:"relative",children:(0,r.jsx)(n.I,{value:J,onChange:e=>L(e.target.value),type:"text",id:"music_spotify",placeholder:"EX:... https://open.spotify.com/track/2g9fVupIy2qbQwabYzVnUv?si=t00Jwz_NQqS34cRM2ZlM6A",className:"text-white border border-white px-3 placeholder:text-slate-400 text-sm"})})]}),(0,r.jsxs)("label",{className:"w-full text-white",children:[(0,r.jsx)("p",{className:"text-white text-xs max-w-[400px] font-medium md:leading-7 leading-2 pt-2",children:"Mensagem para o(a) amado(a):"}),(0,r.jsx)(o.g,{className:"border max-h-56 min-h-56 border-white px-3",value:R,onChange:e=>_(e.target.value),placeholder:""})]}),(0,r.jsx)("div",{className:"mb-2 mt-4",children:(0,r.jsxs)("div",{className:"bg-yellow-500/20 border border-yellow-500/50 rounded-lg p-3 mb-3",children:[(0,r.jsx)("h3",{className:"text-yellow-400 font-semibold text-sm mb-2 flex items-center",children:"\uD83D\uDCA1 Dicas para fotos perfeitas:"}),(0,r.jsxs)("ul",{className:"text-yellow-200 text-xs space-y-1",children:[(0,r.jsx)("li",{children:"• Use fotos em modo retrato (vertical) para melhor visualiza\xe7\xe3o"}),(0,r.jsx)("li",{children:"• Certifique-se de que as fotos estejam bem iluminadas"}),(0,r.jsx)("li",{children:"• Evite fotos muito escuras ou desfocadas"}),(0,r.jsx)("li",{children:"• Escolha suas melhores mem\xf3rias juntos!"})]})]})}),(0,r.jsxs)(u.OI,{accept:".png, .jpg, .jpeg",onChange:e=>{e.target.files&&U(Array.from(e.target.files))},maxFiles:4,children:[(0,r.jsx)(u.ZD,{asChild:!0,children:(0,r.jsxs)(c.z,{id:"buttonModal",className:"border md:text-base text-wrap text-xs border-white rounded-sm my-4 px-3 w-full text-white text-center",variant:"outline",size:"sm",children:[(0,r.jsx)(h.Dmm,{})," Selecione at\xe9 4 fotos (preferencialmente no modo retrato)"]})}),(0,r.jsx)(u.lG,{})]}),R&&D.length>0?(0,r.jsx)(w.hg,{asChild:!0,children:(0,r.jsx)("button",{className:"border text-white px-2 max-w-[300px] w-full hover:text-black hover:bg-white bg-transparent duration-200 cursor-pointer flex flex-col justify-center items-center rounded-md mt-3 py-2",children:"Criar Surpresa"})}):(0,r.jsxs)("button",{disabled:!0,className:"border text-white bg-transparent duration-200 px-2  w-full flex flex-col justify-center items-center rounded-md mt-3 py-2",children:["Criar Surpresa",R&&D.length>0?null:(0,r.jsx)("p",{className:"text-slate-400 text-xs",children:"Campos a serem preenchidos"})]})]})]})]}),(0,r.jsx)(g.Z,{})]})}function U(){return(0,r.jsx)(s.Suspense,{fallback:(0,r.jsx)("div",{className:"h-screen flex flex-col bg-defaultBg justify-center items-center",children:(0,r.jsx)("div",{className:"lds-heart",children:(0,r.jsx)("div",{})})}),children:(0,r.jsx)(D,{})})}}},function(e){e.O(0,[7699,9212,3872,1670,5623,3306,7505,6853,4767,8828,2971,7023,1744],function(){return e(e.s=71141)}),_N_E=e.O()}]);